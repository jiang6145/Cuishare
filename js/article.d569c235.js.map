{"version":3,"sources":["webpack:///./src/views/ArticleRead.vue?229a","webpack:///./src/components/CommentSidebar.vue?861d","webpack:///src/components/CommentSidebar.vue","webpack:///./src/components/CommentSidebar.vue?af32","webpack:///./src/components/CommentSidebar.vue","webpack:///src/views/ArticleRead.vue","webpack:///./src/views/ArticleRead.vue?a76b","webpack:///./src/views/ArticleRead.vue","webpack:///./node_modules/vue-dynamic-height/dist/vue-dynamic-height.umd.js","webpack:///./src/components/FollowButton.vue?2101","webpack:///src/components/FollowButton.vue","webpack:///./src/components/FollowButton.vue?e73c","webpack:///./src/components/FollowButton.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","article","_e","author","photoUrl","_id","_v","_s","username","about","staticRenderFns","ref","on","onChange","scopedSlots","_u","key","fn","hide","show","directives","name","rawName","value","expression","minHeight","domProps","onFocus","onBlur","$event","target","composing","commentText","onCancel","isDisabled","onSubmit","_l","comment","byUser","createDate","isArticleAuthor","isCommentAuthor","user","isAdmin","proxy","deleteComment","text","DynamicHeight","props","Object","data","comments","isShowButton","watch","trim","computed","$store","state","id","methods","event","style","resetTextarea","isBlocked","$refs","commentSidebar","$bvModal","$toasted","error","textarea","height","component","components","ArticleInteractive","FollowButton","CommentSidebar","initEditor","e","t","module","exports","window","n","i","o","l","call","m","c","d","defineProperty","enumerable","get","r","Symbol","toStringTag","__esModule","create","bind","default","prototype","hasOwnProperty","p","s","concat","scrollHeight","a","disabled","overflow","setTimeout","addEventListener","unbind","removeEventListener","installed","directive","installVueDynamicHeight","u","Vue","use","Function","isMyself","class","isFollow","follow","following","includes"],"mappings":"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","file":"js/article.d569c235.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article article--editor-read\"},[_c('b-container',[_c('b-row',[_c('b-col',{staticClass:\"mx-auto\",attrs:{\"cols\":\"12\",\"lg\":\"10\"}},[_c('div',{attrs:{\"id\":\"editor-read\"}}),_c('div',{staticClass:\"article--editor-read__interactive\"},[(_vm.article)?_c('ArticleInteractive',{attrs:{\"article\":_vm.article,\"size\":'lg',\"isShowComment\":true}}):_vm._e()],1),(_vm.article)?_c('div',{staticClass:\"article--editor-read__author\"},[_c('b-avatar',{staticClass:\"article__avatar\",attrs:{\"src\":_vm.article.author.photoUrl,\"to\":'/blog/'+_vm.article.author._id,\"size\":\"5rem\"}}),_c('div',{staticClass:\"article__info\"},[_c('span',{staticClass:\"article__author-name\"},[_vm._v(_vm._s(_vm.article.author.username))]),_c('p',{staticClass:\"article__author-about\"},[_vm._v(_vm._s(_vm.article.author.about))])]),_c('FollowButton',{attrs:{\"author\":_vm.article.author}})],1):_vm._e()])],1)],1),(_vm.article)?_c('CommentSidebar',{attrs:{\"article\":_vm.article}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-sidebar',{ref:\"commentSidebar\",staticClass:\"comment comment--sidebar\",attrs:{\"id\":\"comment-sidebar\",\"no-close-on-route-change\":\"\",\"backdrop\":\"\",\"right\":\"\",\"shadow\":\"\",\"no-header\":\"\"},on:{\"change\":_vm.onChange},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar hide = ref.hide;\nvar show = ref.show;\nreturn [_c('div',{staticClass:\"comment__header\"},[_c('b-button-close',{staticClass:\"btn btn--close\",on:{\"click\":hide}}),_c('h4',{staticClass:\"comment__title\"},[_vm._v(\"留言\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.commentText),expression:\"commentText\"},{name:\"dynamic-height\",rawName:\"v-dynamic-height\",value:({ minHeight: '42px' }),expression:\"{ minHeight: '42px' }\"}],ref:\"textarea\",staticClass:\"comment__input-textarea\",attrs:{\"placeholder\":\"分享你的想法吧\"},domProps:{\"value\":(_vm.commentText)},on:{\"focus\":_vm.onFocus,\"blur\":_vm.onBlur,\"input\":function($event){if($event.target.composing){ return; }_vm.commentText=$event.target.value}}}),(_vm.isShowButton)?_c('div',{staticClass:\"comment__button-group\"},[_c('b-button',{staticClass:\"mr-2 custom-btn\",attrs:{\"variant\":\"outline-secondary\",\"size\":\"sm\"},on:{\"click\":_vm.onCancel}},[_vm._v(\"取消\")]),_c('b-button',{staticClass:\"custom-btn\",attrs:{\"disabled\":_vm.isDisabled,\"variant\":\"outline-warning\",\"size\":\"sm\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"留言\")])],1):_vm._e()],1),_vm._l((_vm.comments),function(comment){return _c('div',{key:comment._id,staticClass:\"comment__item\"},[_c('b-avatar',{staticClass:\"comment__user-avatar\",attrs:{\"to\":'/blog/' + comment.byUser._id,\"src\":comment.byUser.photoUrl,\"size\":\"md\"}}),_c('div',{staticClass:\"comment__info\"},[_c('span',{staticClass:\"comment__username\"},[_vm._v(_vm._s(comment.byUser.username))]),_c('span',{staticClass:\"comment__create-at\"},[_vm._v(_vm._s(comment.createDate))]),(_vm.isArticleAuthor || _vm.isCommentAuthor(comment) || _vm.user.isAdmin)?_c('b-dropdown',{attrs:{\"text\":\"Left align\",\"variant\":\"link\",\"no-caret\":\"\",\"right\":\"\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('font-awesome-icon',{staticClass:\"icon\",attrs:{\"icon\":['fas','ellipsis-v'],\"fixed-width\":\"\"}})]},proxy:true}],null,true)},[_c('b-dropdown-item',{staticClass:\"dropdown--danger\",on:{\"click\":function($event){return _vm.deleteComment(comment)}}},[_vm._v(\"刪除留言\")])],1):_vm._e()],1),_c('p',{staticClass:\"comment__content\"},[_vm._v(_vm._s(comment.text))])],1)})]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n\n  b-sidebar.comment.comment--sidebar(\n    id=\"comment-sidebar\"\n    ref=\"commentSidebar\"\n    @change=\"onChange\"\n    no-close-on-route-change\n    backdrop\n    right\n    shadow\n    no-header\n  )\n    template(#default=\"{ hide, show }\")\n      .comment__header\n        b-button-close.btn.btn--close(@click=\"hide\")\n        h4.comment__title 留言\n        textarea.comment__input-textarea(\n          @focus=\"onFocus\"\n          @blur=\"onBlur\"\n          v-model=\"commentText\"\n          v-dynamic-height=\"{ minHeight: '42px' }\"\n          ref=\"textarea\"\n          placeholder=\"分享你的想法吧\"\n        )\n        .comment__button-group(v-if=\"isShowButton\")\n          b-button.mr-2.custom-btn(\n            @click=\"onCancel\"\n            variant=\"outline-secondary\"\n            size=\"sm\"\n          ) 取消\n          b-button.custom-btn(\n            @click=\"onSubmit\"\n            :disabled=\"isDisabled\"\n            variant=\"outline-warning\"\n            size=\"sm\"\n          ) 留言\n\n      .comment__item(v-for=\"comment in comments\" :key=\"comment._id\")\n        b-avatar.comment__user-avatar(\n          :to=\"'/blog/' + comment.byUser._id\"\n          :src=\"comment.byUser.photoUrl\"\n          size=\"md\"\n        )\n        .comment__info\n          span.comment__username {{ comment.byUser.username }}\n          span.comment__create-at {{ comment.createDate }}\n          b-dropdown(\n            v-if=\"isArticleAuthor || isCommentAuthor(comment) || user.isAdmin\"\n            text=\"Left align\"\n            variant=\"link\"\n            no-caret\n            right\n          )\n            template(#button-content)\n              font-awesome-icon.icon(\n                :icon=\"['fas','ellipsis-v']\"\n                fixed-width\n              )\n            b-dropdown-item.dropdown--danger(@click=\"deleteComment(comment)\") 刪除留言\n        p.comment__content {{ comment.text }}\n\n</template>\n\n<script>\nimport DynamicHeight from 'vue-dynamic-height'\nimport { dateDifference } from '../dateDifference'\n\nexport default {\n  name: 'CommentSidebar',\n  directives: {\n    DynamicHeight\n  },\n  props: {\n    article: Object\n  },\n  data () {\n    return {\n      commentText: '',\n      comments: [],\n      isDisabled: true,\n      isShowButton: false\n    }\n  },\n  watch: {\n    commentText () {\n      if (this.commentText.trim()) {\n        this.isDisabled = false\n      } else {\n        this.isDisabled = true\n      }\n    }\n  },\n  computed: {\n    user () {\n      return this.$store.state.user\n    },\n    isArticleAuthor () {\n      return this.article.author._id === this.user.id\n    }\n  },\n  methods: {\n    isCommentAuthor (comment) {\n      return comment.byUser._id === this.user.id\n    },\n    onFocus (event) {\n      event.target.style['min-height'] = '84px'\n      this.isShowButton = true\n    },\n    onBlur () {\n      if (this.commentText.trim()) return\n      this.resetTextarea()\n    },\n    onCancel () {\n      this.resetTextarea()\n    },\n    async onSubmit () {\n      if (!this.commentText.trim()) return\n\n      try {\n        const data = { text: this.commentText }\n        const res = await this.axios.post(process.env.VUE_APP_API + '/comments/' + this.article._id, data)\n        const { success, result } = res.data\n\n        if (success) {\n          result.createDate = dateDifference(result.createDate)\n          this.comments.unshift(result)\n          this.resetTextarea()\n        }\n      } catch (error) {\n        console.log(error)\n      }\n    },\n    onChange () {\n      if (this.user.id && !this.user.isBlocked) return\n      this.$refs.commentSidebar.hide()\n      if (!this.user.id) this.$bvModal.show('user-modal')\n      if (this.user.isBlocked) this.$toasted.error('你已被封鎖不能留言')\n    },\n    resetTextarea () {\n      this.commentText = ''\n      this.isShowButton = false\n      this.$refs.textarea.style['min-height'] = '42px'\n      this.$refs.textarea.style.height = '42px'\n    },\n    async deleteComment (comment) {\n      try {\n        const res = await this.axios.delete(process.env.VUE_APP_API + '/comments/' + comment._id)\n        const { success, result } = res.data\n        if (success) {\n          const index = this.comments.findIndex(comment => comment._id === result._id)\n          this.comments.splice(index, 1)\n        }\n      } catch (error) {\n        console.log(error)\n      }\n    }\n  },\n  async mounted () {\n    try {\n      const res = await this.axios.get(process.env.VUE_APP_API + '/comments/' + this.article._id)\n      const { success, result } = res.data\n\n      if (success) {\n        this.comments = result.map(comment => {\n          comment.createDate = dateDifference(comment.createDate)\n          return comment\n        })\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentSidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentSidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CommentSidebar.vue?vue&type=template&id=8c775332&lang=pug&\"\nimport script from \"./CommentSidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./CommentSidebar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template lang=\"pug\">\n.article.article--editor-read\n  b-container\n    b-row\n      b-col.mx-auto(cols=\"12\" lg=\"10\")\n        #editor-read\n        .article--editor-read__interactive\n          ArticleInteractive(\n            v-if=\"article\"\n            :article=\"article\"\n            :size=\"'lg'\"\n            :isShowComment=\"true\"\n          )\n\n        .article--editor-read__author(v-if=\"article\")\n          b-avatar.article__avatar(\n            :src=\"article.author.photoUrl\"\n            :to=\"'/blog/'+article.author._id\"\n            size=\"5rem\"\n          )\n          .article__info\n            span.article__author-name {{ article.author.username }}\n            p.article__author-about {{ article.author.about }}\n          FollowButton(:author=\"article.author\")\n\n  CommentSidebar(v-if=\"article\" :article=\"article\")\n</template>\n\n<script>\nimport ClassicEditor from '../ckeditor'\nimport ArticleInteractive from '../components/ArticleInteractive'\nimport FollowButton from '../components/FollowButton'\nimport CommentSidebar from '../components/CommentSidebar'\n\nexport default {\n  name: 'ArticleRead',\n  components: {\n    ArticleInteractive,\n    FollowButton,\n    CommentSidebar\n  },\n  data () {\n    return {\n      article: null\n    }\n  },\n  methods: {\n    initEditor () {\n      ClassicEditor\n        .create(document.querySelector('#editor-read'), {\n          toolbar: []\n        })\n        .then(editor => {\n          editor.isReadOnly = true // 設定唯讀\n\n          // 寫入內容\n          const content = this.article.text\n          const viewFragment = editor.data.processor.toView(content)\n          const modelFragment = editor.data.toModel(viewFragment)\n          editor.model.insertContent(modelFragment)\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    }\n  },\n  async mounted () {\n    const loader = this.$loading.show()\n    try {\n      const articleId = this.$route.params.id\n      const res = await this.axios.get(process.env.VUE_APP_API + '/articles/' + articleId)\n      const { success, result } = res.data\n      if (result.isBlocked) {\n        this.$router.go(-1)\n        this.$toasted.error('此文章已被封鎖，不可閱讀')\n      }\n      if (success) {\n        this.article = result\n        this.initEditor()\n      }\n    } catch (error) {\n      console.log(error)\n    }\n\n    loader.hide()\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleRead.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleRead.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleRead.vue?vue&type=template&id=47d0f428&lang=pug&\"\nimport script from \"./ArticleRead.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleRead.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)(\"object\"==typeof exports?exports:e)[i]=n[i]}}(window,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([function(e,t,n){\"use strict\";function i(e){e.target.style.height=0,e.target.style.height=\"\".concat(e.target.scrollHeight,\"px\")}t.a={bind:function(e,t){var n;(null===(n=t.value)||void 0===n?void 0:n.disabled)||(!function(e){e.style.overflow=\"hidden\"}(e),function(e,t){t.value&&t.value.minHeight&&(e.style[\"min-height\"]=t.value.minHeight)}(e,t),function(e){setTimeout((function(){i({target:e})}))}(e),e.addEventListener(\"input\",i))},unbind:function(e,t){var n;(null===(n=t.value)||void 0===n?void 0:n.disabled)||e.removeEventListener(\"input\",i)}}},function(e,t,n){\"use strict\";n.r(t),function(e){n.d(t,\"installVueDynamicHeight\",(function(){return o}));var i=n(0);function o(e){o.installed||(o.installed=!0,e.directive(\"DynamicHeight\",i.a))}var r={installVueDynamicHeight:o},u=null;\"undefined\"!=typeof window?u=window.Vue:void 0!==e&&(u=e.Vue),u&&u.use(r),t.default=i.a}.call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n}])}));\n//# sourceMappingURL=vue-dynamic-height.umd.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.isMyself)?_c('b-button',{staticClass:\"custom-btn custom-btn--follow\",class:_vm.isFollow? 'btn--following' :'',attrs:{\"variant\":\"outline-warning\",\"size\":\"sm\"},on:{\"click\":_vm.follow}},[_vm._v(_vm._s(_vm.isFollow ? '追蹤中': '追蹤'))]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div\n    b-button.custom-btn.custom-btn--follow(\n      v-if=\"!isMyself\"\n      variant=\"outline-warning\"\n      size=\"sm\"\n      @click=\"follow\"\n      :class=\"isFollow? 'btn--following' :''\"\n    ) {{ isFollow ? '追蹤中': '追蹤' }}\n</template>\n\n<script>\nexport default {\n  name: 'FollowButton',\n  props: {\n    author: Object\n  },\n  computed: {\n    user () {\n      return this.$store.state.user\n    },\n    isFollow () {\n      return this.user.following.includes(this.author._id)\n    },\n    isMyself () {\n      return this.author._id === this.user.id\n    }\n  },\n  methods: {\n    async follow () {\n      if (this.user.isBlocked) return this.$toasted.error('你的帳號被封鎖，不能操作')\n      try {\n        if (!this.user.id) return this.$bvModal.show('user-modal')\n\n        const res = await this.axios.patch(process.env.VUE_APP_API + '/users/follow/' + this.author._id)\n        const { success, result } = res.data\n\n        if (success) {\n          this.$store.commit('following', result)\n          this.$emit('onClick', result)\n        }\n      } catch (error) {\n        console.log(error)\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FollowButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FollowButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FollowButton.vue?vue&type=template&id=1d135eb9&lang=pug&\"\nimport script from \"./FollowButton.vue?vue&type=script&lang=js&\"\nexport * from \"./FollowButton.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}