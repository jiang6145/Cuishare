{"version":3,"sources":["webpack:///./src/components/admin/ArticleManagement.vue?8107","webpack:///src/components/admin/ArticleManagement.vue","webpack:///./src/components/admin/ArticleManagement.vue?87c6","webpack:///./src/components/admin/ArticleManagement.vue","webpack:///./node_modules/core-js/modules/es.string.starts-with.js","webpack:///./node_modules/core-js/modules/es.array.index-of.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","articles","length","attrs","model","value","callback","$$v","searchValue","expression","fields","filterArticles","scopedSlots","_u","key","fn","data","directives","name","rawName","modifiers","item","_id","title","author","photoUrl","username","likes","favorites","class","isBlocked","on","$event","blockade","articleStatus","staticRenderFns","computed","startsWith","filter","methods","component","$","getOwnPropertyDescriptor","f","toLength","notARegExp","requireObjectCoercible","correctIsRegExpLogic","IS_PURE","nativeStartsWith","min","Math","CORRECT_IS_REGEXP_LOGIC","MDN_POLYFILL_BUG","descriptor","String","prototype","writable","target","proto","forced","searchString","that","index","arguments","undefined","search","call","slice","$indexOf","indexOf","arrayMethodIsStrict","arrayMethodUsesToLength","nativeIndexOf","NEGATIVE_ZERO","STRICT_METHOD","USES_TO_LENGTH","ACCESSORS","1","searchElement","apply"],"mappings":"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","file":"js/article-management.ffecc0f3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-management\"},[_c('h3',{staticClass:\"d-inline-block mb-4 mr-3\"},[_vm._v(\"文章管理\")]),_c('span',{staticClass:\"tag no-hover\"},[_vm._v(_vm._s('文章總數：' + _vm.articles.length))]),_c('b-form',{staticClass:\"mb-4\"},[_c('b-form-input',{attrs:{\"type\":\"text\",\"placeholder\":\"搜尋文章或輸入文章狀態來查詢 ...\"},model:{value:(_vm.searchValue),callback:function ($$v) {_vm.searchValue=$$v},expression:\"searchValue\"}})],1),_c('div',{staticClass:\"article-management__main\"},[_c('b-table',{attrs:{\"fields\":_vm.fields,\"items\":_vm.filterArticles,\"responsive\":\"md\",\"striped\":\"\",\"hover\":\"\"},scopedSlots:_vm._u([{key:\"cell(title)\",fn:function(data){return [_c('router-link',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover.left\",modifiers:{\"hover\":true,\"left\":true}}],attrs:{\"to\":'/article/' + data.item._id,\"title\":data.item.title}},[_vm._v(_vm._s(data.item.title))])]}},{key:\"cell(author)\",fn:function(data){return [_c('b-avatar',{attrs:{\"src\":data.item.author.photoUrl,\"to\":'/blog/'+ data.item.author._id,\"size\":\"2rem\"}}),_c('span',{staticClass:\"ml-2\"},[_vm._v(_vm._s(data.item.author.username))])]}},{key:\"cell(likes)\",fn:function(data){return [_c('span',[_vm._v(_vm._s(data.item.likes))])]}},{key:\"cell(favorites)\",fn:function(data){return [_c('span',[_vm._v(_vm._s(data.item.favorites))])]}},{key:\"cell(isBlocked)\",fn:function(data){return [_c('b-button',{staticClass:\"custom-btn custom-btn--blockade\",class:data.item.isBlocked ? 'btn--blocked' :'',attrs:{\"variant\":\"outline-secondary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.blockade(data)}}},[_vm._v(_vm._s(_vm.articleStatus(data)))])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  .article-management\n    h3.d-inline-block.mb-4.mr-3 文章管理\n    span.tag.no-hover {{ '文章總數：' + articles.length}}\n    b-form.mb-4\n      b-form-input(\n        v-model=\"searchValue\"\n        type=\"text\"\n        placeholder=\"搜尋文章或輸入文章狀態來查詢 ...\"\n      )\n\n    .article-management__main\n      b-table(\n        :fields=\"fields\"\n        :items=\"filterArticles\"\n        responsive=\"md\"\n        striped\n        hover\n      )\n        template(#cell(title)=\"data\")\n          router-link(\n            :to=\"'/article/' + data.item._id\"\n            v-b-tooltip.hover.left\n            :title=\"data.item.title\"\n          ) {{ data.item.title }}\n\n        template(#cell(author)=\"data\")\n          b-avatar(\n            :src=\"data.item.author.photoUrl\"\n            :to=\"'/blog/'+ data.item.author._id\"\n            size=\"2rem\"\n          )\n          span.ml-2 {{ data.item.author.username }}\n\n        template(#cell(likes)=\"data\")\n          span {{ data.item.likes }}\n\n        template(#cell(favorites)=\"data\")\n          span {{ data.item.favorites }}\n\n        template(#cell(isBlocked)=\"data\")\n          b-button.custom-btn.custom-btn--blockade(\n            variant=\"outline-secondary\"\n            size=\"sm\"\n            @click=\"blockade(data)\"\n            :class=\"data.item.isBlocked ? 'btn--blocked' :''\"\n          ) {{ articleStatus(data) }}\n</template>\n\n<script>\nexport default {\n  name: 'ArticleManagement',\n  data () {\n    return {\n      searchValue: '',\n      fields: [\n        { key: 'title', label: '文章', sortable: true },\n        { key: 'author', label: '作者', sortable: true },\n        { key: 'likes', label: '喜歡', sortable: true },\n        { key: 'favorites', label: '收藏', sortable: true },\n        { key: 'isBlocked', label: '文章狀態' }\n      ],\n      articles: []\n    }\n  },\n  computed: {\n    filterArticles () {\n      if (this.searchValue.startsWith('已發佈')) {\n        return this.articles.filter(article => article.isPublished && !article.isUnlisted)\n      } else if (this.searchValue.startsWith('未公開')) {\n        return this.articles.filter(article => article.isUnlisted)\n      } else if (this.searchValue.startsWith('封鎖')) {\n        return this.articles.filter(article => article.isBlocked)\n      } else {\n        return this.articles.filter(article => article.title.indexOf(this.searchValue) >= 0)\n      }\n    }\n  },\n  methods: {\n    async blockade (data) {\n      try {\n        const blockadeData = {\n          isBlocked: !data.item.isBlocked\n        }\n\n        const res = await this.axios.patch(process.env.VUE_APP_API + '/articles/blockade/' + data.item._id, blockadeData)\n        const { success, result } = res.data\n        if (success) data.item.isBlocked = result.isBlocked\n      } catch (error) {\n        console.log(error)\n      }\n    },\n    articleStatus (data) {\n      const { isPublished, isUnlisted, isBlocked } = data.item\n      return isBlocked ? '封鎖中' : (!isPublished ? '未發佈' : (isUnlisted ? '未公開' : '已發佈'))\n    }\n  },\n  async mounted () {\n    try {\n      const res = await this.axios.get(process.env.VUE_APP_API + '/articles')\n      const { success, result } = res.data\n      if (success) {\n        this.articles = result.map(article => {\n          article.likes = article.likes.length\n          article.favorites = article.favorites.length\n          return article\n        })\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleManagement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleManagement.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleManagement.vue?vue&type=template&id=2719670c&lang=pug&\"\nimport script from \"./ArticleManagement.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleManagement.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\nvar nativeStartsWith = ''.startsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return nativeStartsWith\n      ? nativeStartsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}