(function(e){const t=e["zh"]=e["zh"]||{};t.dictionary=Object.assign(t.dictionary||{},{"%0 of %1":"%0/%1","Block quote":"段落引用","Blue marker":"藍色標記",Bold:"粗體","Bulleted List":"符號清單",Cancel:"取消","Centered image":"置中圖片","Change image text alternative":"修改圖片的替代文字","Choose heading":"選取標題",Column:"欄","Delete column":"刪除欄","Delete row":"刪除列",Downloadable:"可下載","Dropdown toolbar":"下拉選單","Edit link":"編輯連結","Editor toolbar":"編輯器工具","Enter image caption":"輸入圖片說明","Full size image":"完整尺寸圖片","Green marker":"綠色標記","Green pen":"綠色筆","Header column":"標題欄","Header row":"標題列",Heading:"標題","Heading 1":"標題 1","Heading 2":"標題 2","Heading 3":"標題 3","Heading 4":"標題 4","Heading 5":"標題 5","Heading 6":"標題 6",Highlight:"高亮","Horizontal line":"水平線","Image resize list":"圖片縮放清單","Image toolbar":"圖片工具","image widget":"圖片小工具",Insert:"","Insert column left":"插入左方欄","Insert column right":"插入右方欄","Insert image":"插入圖片","Insert image via URL":"","Insert media":"插入影音","Insert paragraph after block":"在這個區塊後面插入一個段落","Insert paragraph before block":"在這個區塊前面插入一個段落","Insert row above":"插入上方列","Insert row below":"插入下方列","Insert table":"插入表格",Italic:"斜體","Left aligned image":"向左對齊圖片",Link:"連結","Link image":"圖片連結","Link URL":"連結˙ URL","Media URL":"影音網址","media widget":"影音小工具","Merge cell down":"合併下方儲存格","Merge cell left":"合併左方儲存格","Merge cell right":"合併右方儲存格","Merge cell up":"合併上方儲存格","Merge cells":"合併儲存格",Next:"下一","Numbered List":"有序清單","Open in a new tab":"在新視窗開啟","Open link in new tab":"在新視窗開啟連結",Original:"原始圖片",Paragraph:"段落","Paste the media URL in the input.":"在輸入框貼上影音網址。","Pink marker":"粉色標記",Previous:"上一","Red pen":"紅色筆",Redo:"重做","Remove highlight":"清除高亮","Resize image":"縮放圖片","Resize image to %0":"縮放圖片到 %0","Resize image to the original size":"縮放圖片到原始尺寸","Rich Text Editor":"豐富文字編輯器","Rich Text Editor, %0":"豐富文字編輯器，%0","Right aligned image":"向右對齊圖片",Row:"列",Save:"儲存","Saving changes":"正在儲存變更","Select all":"選取全部","Select column":"選擇欄","Select row":"選擇列","Show more items":"顯示更多","Side image":"側邊圖片","Split cell horizontally":"水平分割儲存格","Split cell vertically":"垂直分割儲存格",Strikethrough:"刪除線","Table toolbar":"表格工具","Text alternative":"替代文字","Text highlight toolbar":"高亮","The URL must not be empty.":"網址不能空白。","This link has no URL":"連結沒有URL","This media URL is not supported.":"不支援此影音網址。","Tip: Paste the URL into the content to embed faster.":"提示：在內容貼上網址更快崁入。","To-do List":"代辦清單","Type or paste your content here.":"在此輸入或貼上你的內容。","Type your title":"輸入你的標題",Undo:"取消",Unlink:"移除連結",Update:"","Update image URL":"","Upload failed":"上傳失敗","Upload in progress":"正在上傳","Widget toolbar":"小工具","Yellow marker":"黃色標記"}),t.getPluralForm=function(e){return 0}})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);m&&m(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,i=1;i<r.length;i++){var o=r[i];0!==s[o]&&(a=!1)}a&&(n.splice(t--,1),e=c(c.s=r[0]))}return e}var a={},i={app:0},s={app:0},n=[];function o(e){return c.p+"js/"+({about:"about",admin:"admin","article-management":"article-management","article-search":"article-search","article~article-edit":"article~article-edit",article:"article","article-edit":"article-edit",blog:"blog","member-management":"member-management","my-article":"my-article","my-favorites":"my-favorites","my-follow":"my-follow","user-settings":"user-settings"}[e]||e)+"."+{about:"8c45dbff",admin:"6ab8e1e1","article-management":"ffecc0f3","article-search":"17f8937f","article~article-edit":"8e0466f5",article:"d569c235","article-edit":"7243b1fa",blog:"3a2ea7a1","member-management":"f440aad3","my-article":"1949e66a","my-favorites":"2954ab59","my-follow":"30ca8667","user-settings":"91950b23"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r={about:1,"article~article-edit":1};i[e]?t.push(i[e]):0!==i[e]&&r[e]&&t.push(i[e]=new Promise((function(t,r){for(var a="css/"+({about:"about",admin:"admin","article-management":"article-management","article-search":"article-search","article~article-edit":"article~article-edit",article:"article","article-edit":"article-edit",blog:"blog","member-management":"member-management","my-article":"my-article","my-favorites":"my-favorites","my-follow":"my-follow","user-settings":"user-settings"}[e]||e)+"."+{about:"ea6ec120",admin:"31d6cfe0","article-management":"31d6cfe0","article-search":"31d6cfe0","article~article-edit":"9b2fbb8b",article:"31d6cfe0","article-edit":"31d6cfe0",blog:"31d6cfe0","member-management":"31d6cfe0","my-article":"31d6cfe0","my-favorites":"31d6cfe0","my-follow":"31d6cfe0","user-settings":"31d6cfe0"}[e]+".css",s=c.p+a,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var l=n[o],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===s))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){l=d[o],u=l.getAttribute("data-href");if(u===a||u===s)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||s,n=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=a,delete i[e],m.parentNode.removeChild(m),r(n)},m.href=s;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){i[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,r){a=s[e]=[t,r]}));t.push(a[2]=n);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(m);var r=s[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",d.name="ChunkLoadError",d.type=a,d.request=i,r[1](d)}s[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(r,a,function(t){return e[t]}.bind(null,a));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=u;n.push([0,"chunk-vendors"]),r()}({0:function(e,t,r){e.exports=r("56d7")},"1e9d":function(e,t,r){"use strict";r("f8ff")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("0cdd");var a=r("2b0e"),i=r("5f5b");r("ab8b"),r("2dd8");a["default"].use(i["a"]);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{style:e.styleObject,attrs:{id:"app"}},[r("Navbar"),r("div",{staticClass:"wrapper"},[r("div",{staticClass:"main"},[r("router-view")],1)]),r("UserModal"),r("ArticleSearchModal"),e._m(0)],1)},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("footer",{staticClass:"footer"},[r("p",{staticClass:"footer__text"},[e._v("Copyright © Cuishare. 2021 • All rights reserved.")])])}],o=(r("b0c0"),r("96cf"),r("1da1")),c=(r("c1c3"),r("2bd9"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-navbar",{class:e.navbarClass,attrs:{fixed:"top"}},[a("b-container",[a("b-navbar-brand",{attrs:{href:"#",to:"/"}},[a("img",{staticClass:"logo",attrs:{src:r("fdd9")}}),e._v("Cuishare")]),e.isLogin?a("UserMenu"):a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"user-modal",expression:"'user-modal'"}],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toggleModal(!1)}}},[e._v("註冊會員")]),a("b-nav-item",{attrs:{href:"#",to:"/about"}},[a("font-awesome-icon",{staticClass:"icon",attrs:{icon:["far","question-circle"],size:"lg","fixed-width":""}})],1),a("b-nav-item",[e.isLogin?e._e():a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"user-modal",expression:"'user-modal'"}],class:{"custom-btn":e.navbarClass["light-navbar"]},attrs:{size:"sm",variant:"outline-warning"},on:{click:function(t){return e.toggleModal(!0)}}},[e._v("登入")])],1)],1)],1)],1)}),l=[],u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-navbar-nav",{staticClass:"user-menu"},[e.isArticleEditRoute?r("div",{attrs:{id:"snippet-autosave-status"}},[r("div",{attrs:{id:"snippet-autosave-status_spinner"}},[r("span",{attrs:{id:"snippet-autosave-status_spinner-label"}}),r("span",{attrs:{id:"snippet-autosave-status_spinner-loader"}})])]):e._e(),r("b-nav-item",{staticClass:"user-menu--editor ml-3"},[e.isArticleEditRoute?r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.article-publish-modal",modifiers:{"article-publish-modal":!0}}],staticClass:"custom-btn letter-spacing-sm",attrs:{disabled:e.isDisabled,variant:"outline-success",size:"sm"}},[e._v(e._s(e.currentEditArticle.isPublished?"變更文章設定":"發布文章"))]):e._e()],1),e.isArticleEditRoute?e._e():r("b-nav-item",{staticClass:"user-menu--search",class:e.searchClass},[r("b-form",{staticClass:"d-none d-md-block",on:{submit:function(t){return t.preventDefault(),e.onSearch(t)}}},[r("font-awesome-icon",{staticClass:"icon icon--search",attrs:{icon:["fas","search"],"fixed-width":"",size:"lg"},on:{click:e.onShowSearch}}),r("b-form-input",{ref:"search-input",attrs:{type:"text",placeholder:"搜尋文章..."},on:{blur:function(t){e.searchClass["search-show"]=!1}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),r("font-awesome-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.article-search-modal",modifiers:{"article-search-modal":!0}}],staticClass:"icon d-block d-md-none",attrs:{icon:["fas","search"],size:"lg","fixed-width":""}})],1),r("b-nav-item",{staticClass:"user-menu--notifications"},[r("NotificationsIcon")],1),r("b-nav-item",{staticClass:"user-menu--avatar"},[r("b-dropdown",{attrs:{right:"","no-caret":"",variant:"link"},scopedSlots:e._u([{key:"button-content",fn:function(){return[r("b-avatar",{staticClass:"user-menu__avatar",attrs:{src:e.user.photoUrl,size:"2.6rem"}})]},proxy:!0}])},[e.user.isBlocked?r("b-dropdown-item",[r("span",{staticClass:"tag tag--blocked no-hover"},[e._v("帳號已被封鎖")])]):e._e(),e.user.isBlocked?r("b-dropdown-divider"):e._e(),r("b-dropdown-item",{attrs:{href:"#",to:"/blog/"+e.user.id,disabled:e.isUserBlocked}},[e._v("你的首頁")]),r("b-dropdown-divider"),r("b-dropdown-item",{attrs:{href:"#",disabled:e.isUserBlocked},on:{click:function(t){return t.preventDefault(),e.createArticle(t)}}},[e._v("寫文章")]),r("b-dropdown-item",{attrs:{href:"#",to:"/user-settings",disabled:e.isUserBlocked}},[e._v("個人設定")]),r("b-dropdown-item",{attrs:{href:"#",to:"/my-article",disabled:e.isUserBlocked}},[e._v("你的文章")]),r("b-dropdown-item",{attrs:{href:"#",to:"/my-favorites",disabled:e.isUserBlocked}},[e._v("收藏文章")]),r("b-dropdown-item",{attrs:{href:"#",to:"/my-follow",disabled:e.isUserBlocked}},[e._v("追蹤與粉絲")]),r("b-dropdown-divider"),r("b-dropdown-item",{staticClass:"user-menu__about",attrs:{href:"#",to:"/about"}},[e._v("關於Cuishare"),r("font-awesome-icon",{attrs:{icon:["far","question-circle"],size:"lg","fixed-width":""}})],1),r("b-dropdown-item",{staticClass:"dropdown--danger",on:{click:e.logout}},[e._v("登出")]),e.user.isAdmin?r("b-dropdown-divider"):e._e(),e.user.isAdmin?r("b-dropdown-item",{attrs:{to:"/admin/member-management",href:"#"}},[e._v("管理員後台")]):e._e()],1)],1)],1)},d=[],m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"notifications"},[r("b-dropdown",{attrs:{right:"","no-caret":"",variant:"link"},scopedSlots:e._u([{key:"button-content",fn:function(){return[r("font-awesome-icon",{staticClass:"icon",attrs:{icon:["far","bell"],size:"lg","fixed-width":""}})]},proxy:!0}])},[0===e.notifications.length?r("b-dropdown-item",[e._v("沒有通知")]):e._l(e.notifications,(function(t){return r("b-dropdown-item",{key:t._id,staticClass:"notifications__item"},[r("div",{staticClass:"notifications__by-user"},[r("b-avatar",{staticClass:"notifications__avatar mr-1",attrs:{src:t.byUser.photoUrl,size:"1.4rem",to:"/blog/"+t.byUser._id}}),r("span",{staticClass:"notifications__by-username"},[e._v(e._s(t.byUser.username))]),r("span",{staticClass:"notifications__create-at ml-auto"},[e._v(e._s(t.createDate))])],1),r("p",{staticClass:"notifications__text",on:{click:function(r){return e.toArticle(t.data._id)}}},[e._v(e._s(t.text))]),r("b-dropdown-divider")],1)}))],2)],1)},f=[],h=(r("99af"),r("d81d"),r("6608")),p={name:"NotificationsIcon",computed:{user:function(){return this.$store.state.user},notifications:function(){return this.user.notifications.concat().map((function(e){return e.createDate=Object(h["a"])(e.createDate),e}))}},methods:{toArticle:function(e){this.$router.push("/article/"+e)}}},b=p,g=r("2877"),v=Object(g["a"])(b,m,f,!1,null,null,null),_=v.exports,w={name:"UserMenu",components:{NotificationsIcon:_},data:function(){return{searchValue:"",searchClass:{"search-show":!1}}},computed:{user:function(){return this.$store.state.user},isUserBlocked:function(){return this.user.isBlocked},isArticleEditRoute:function(){return"ArticleEdit"===this.$route.name},currentEditArticle:function(){return this.$store.state.currentEditArticle},isDisabled:function(){return!this.currentEditArticle.text}},methods:{logout:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$loading.show(),t.prev=1,t.next=4,e.axios.delete("https://cuishare.herokuapp.com/users/logout");case 4:e.$store.commit("logout"),"/"!==e.$route.path&&e.$router.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0);case 11:setTimeout((function(){r.hide()}),500);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},createArticle:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.post("https://cuishare.herokuapp.com/articles",{});case 3:r=t.sent,a=r.data,i=a.success,s=a.result,i&&e.$router.push("/article-edit/"+s._id),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},onSearch:function(){this.$router.push("/article-search/"+this.searchValue),this.searchValue=""},onShowSearch:function(){var e=this;this.searchClass["search-show"]=!this.searchClass["search-show"],this.$nextTick((function(){return e.$refs["search-input"].focus()}))}}},k=w,C=Object(g["a"])(k,u,d,!1,null,null,null),y=C.exports,x={name:"Navbar",components:{UserMenu:y},data:function(){return{navbarClass:{"light-navbar":!1}}},computed:{user:function(){return this.$store.state.user},isLogin:function(){return!!this.user.username},isLoginModal:function(){return this.$store.state.isLoginModal}},watch:{$route:function(e,t){"Home"!==e.name?this.navbarClass["light-navbar"]=!0:this.navbarClass["light-navbar"]=!1}},methods:{toggleModal:function(e){this.$store.commit("toggleModal",e)},onScroll:function(){if("Home"===this.$route.name){var e=document.querySelector(".carousel");window.scrollY>e.offsetHeight?this.navbarClass["light-navbar"]=!0:this.navbarClass["light-navbar"]=!1}}},mounted:function(){window.addEventListener("scroll",this.onScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}},A=x,O=Object(g["a"])(A,c,l,!1,null,null,null),$=O.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{staticClass:"user-modal",attrs:{id:"user-modal",centered:"","hide-footer":"","no-close-on-backdrop":""},on:{hidden:e.resetModal,show:e.resetModal}},[r("ValidationObserver",{ref:"registerAndLoginForm",attrs:{tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit;return[r("b-form",{attrs:{id:"register-and-login-form"},on:{submit:function(t){return t.preventDefault(),a(e.onSubmit)}}},[e.isLoginModal?e._e():r("ValidationProvider",{attrs:{rules:"required|min:4|max:30|bannedName",name:"username",tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,i=t.valid,s=t.dirty;return[r("b-form-group",{attrs:{for:"username"}},[r("b-form-input",{attrs:{name:"username",type:"text",placeholder:"你的暱稱 (可以更改)",state:e.validState(a,i,s)},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),r("p",{staticClass:"validate-message"},[e._v(e._s(a[0]))])],1)]}}],null,!0)}),r("ValidationProvider",{attrs:{rules:"required|email"+(e.isLoginModal?"":"|emailUnique"),name:"email",vid:"email",tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,i=t.valid,s=t.dirty;return[r("b-form-group",{attrs:{for:"email"}},[r("b-form-input",{attrs:{name:"email",type:"text",placeholder:"Email",state:e.validState(a,i,s)},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),r("p",{staticClass:"validate-message"},[e._v(e._s(a[0]))])],1)]}}],null,!0)}),r("ValidationProvider",{ref:"password",attrs:{rules:"required|alphaNum|min:6|max:30",name:"password",tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,i=t.valid,s=t.dirty;return[r("b-form-group",[r("b-form-input",{attrs:{type:"password",placeholder:"密碼",state:e.validState(a,i,s)},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),r("p",{staticClass:"validate-message"},[e._v(e._s(a[0]))])],1)]}}],null,!0)}),e.isLoginModal?e._e():r("ValidationProvider",{attrs:{rules:"required|confirmed:password",name:"confirmPassword",tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,i=t.valid,s=t.dirty;return[r("b-form-group",[r("b-form-input",{attrs:{type:"password",placeholder:"確認密碼",state:e.validState(a,i,s)},model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword",t)},expression:"form.confirmPassword"}}),r("p",{staticClass:"validate-message"},[e._v(e._s(a[0]))])],1)]}}],null,!0)}),r("b-button",{staticClass:"custom-btn user-modal__btn-submit",attrs:{type:"submit",variant:"outline-warning",size:"sm"}},[e._v(e._s(e.isLoginModal?"登入":"註冊"))])],1),r("div",{staticClass:"user-modal__footer"},[r("p",[e._v(e._s(e.isLoginModal?"還沒有帳號嗎?":"已有Cuishare帳號!")),r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toggleModal(t)}}},[e._v(e._s(e.isLoginModal?"註冊":"登入"))])])])]}}])})],1)},S=[],j=r("7bb1"),U={name:"UserModal",components:{ValidationProvider:j["b"],ValidationObserver:j["a"]},data:function(){return{form:{username:"",email:"",password:"",confirmPassword:""}}},computed:{isLoginModal:function(){return this.$store.state.isLoginModal}},methods:{onSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,i,s,n,o,c,l,u,d,m,f,h,p,b,g,v,_,w;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.isLoginModal){t.next=11;break}return r=e.form,a=r.email,i=r.password,s={email:a,password:i},t.next=6,e.axios.post("https://cuishare.herokuapp.com/users/login",s);case 6:n=t.sent,o=n.data,c=o.success,l=o.result,c&&(e.$toasted.success("登入成功，歡迎回來 Cuishae"),e.$store.commit("login",l)),t.next=24;break;case 11:return u=e.$data.form,d=u.username,m=u.email,f=u.password,h={username:d,email:m,password:f},t.next=15,e.axios.post("https://cuishare.herokuapp.com/users",h);case 15:if(p=t.sent,b=p.data,g=b.success,v=b.message,!g){t.next=24;break}return e.$toasted.success(v),_={email:m,password:f},t.next=22,e.axios.post("https://cuishare.herokuapp.com/users/login",_);case 22:w=t.sent,w.data.success&&e.$store.commit("login",w.data.result);case 24:e.$bvModal.hide("user-modal"),t.next=32;break;case 27:t.prev=27,t.t0=t["catch"](0),e.$refs.registerAndLoginForm.reset(),e.$toasted.error(t.t0.response.data.message),console.log(t.t0);case 32:case"end":return t.stop()}}),t,null,[[0,27]])})))()},resetModal:function(){this.form.username="",this.form.email="",this.form.password="",this.form.confirmPassword=""},toggleModal:function(){this.$store.commit("toggleModal",!this.isLoginModal),this.$refs.registerAndLoginForm.reset(),this.resetModal()},validState:function(e,t,r){return!(e[0]&&!t)&&(!(e[0]||!r||!t)||null)}}},M=U,T=(r("1e9d"),Object(g["a"])(M,L,S,!1,null,null,null)),E=T.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{ref:"article-search-modal",attrs:{id:"article-search-modal",centered:"","hide-footer":"","hide-header":""}},[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSearch(t)}}},[r("b-form-group",[r("font-awesome-icon",{staticClass:"icon icon--search",attrs:{icon:["fas","search"],size:"lg","fixed-width":""},on:{click:e.onSearch}}),r("b-form-input",{attrs:{type:"text",placeholder:"搜尋文章..."},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)],1)],1)},I=[],P=(r("498a"),{name:"ArticleSearchModal",data:function(){return{searchValue:""}},methods:{onSearch:function(){this.searchValue.trim()&&(this.$router.push("/article-search/"+this.searchValue),this.searchValue="",this.$refs["article-search-modal"].hide())}}}),z=P,B=Object(g["a"])(z,R,I,!1,null,null,null),N=B.exports,D={name:"App",components:{Navbar:$,UserModal:E,ArticleSearchModal:N},data:function(){return{styleObject:{paddingTop:""}}},computed:{user:function(){return this.$store.state.user}},watch:{$route:function(e,t){"Home"===e.name&&(this.styleObject.paddingTop=""),"Home"!==e.name&&(this.styleObject.paddingTop="80px")}},methods:{heartbeat:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("https://cuishare.herokuapp.com/users/heartbeat");case 3:r=t.sent,e.user.id&&!r.data.success&&(alert("發生錯誤"),e.$store.commit("logout"),"/"!==e.$route.path&&e.$router.push("/")),t.next=12;break;case 7:t.prev=7,t.t0=t["catch"](0),alert(t.t0.response.data.message),e.$store.commit("logout"),"/"!==e.$route.path&&e.$router.push("/");case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getNotifications:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("https://cuishare.herokuapp.com/notifications");case 3:r=t.sent,a=r.data,i=a.success,s=a.result,i&&e.$store.commit("notifications",s.notifications),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},mounted:function(){var e=this;this.heartbeat(),setInterval((function(){e.heartbeat(),e.getNotifications()}),5e3)}},H=D,V=Object(g["a"])(H,s,n,!1,null,null,null),q=V.exports,F=(r("d3b7"),r("8c4f")),K=(r("c740"),r("a434"),r("b64b"),r("2f62")),Y=r("0e44");a["default"].use(K["a"]);var G=new K["a"].Store({state:{user:{id:"",email:"",username:"",about:"",photoUrl:"",following:[],followers:[],articleCategory:[],isAdmin:!1,isBlocked:!1,notifications:[]},currentEditArticle:{},isLoginModal:!0,myArticleTabIndex:0},mutations:{login:function(e,t){e.user.id=t._id,e.user.email=t.email,e.user.username=t.username,e.user.about=t.about,e.user.photoUrl=t.photoUrl,e.user.following=t.following,e.user.followers=t.followers,e.user.articleCategory=t.articleCategory,e.user.isAdmin=t.isAdmin,e.user.isBlocked=t.isBlocked,e.user.notifications=t.notifications},logout:function(e){e.user.id="",e.user.email="",e.user.username="",e.user.about="",e.user.photoUrl="",e.user.following=[],e.user.followers=[],e.user.articleCategory=[],e.user.isAdmin=!1,e.user.isBlocked=!1},updateUser:function(e,t){var r=Object.keys(t);e.user[r[0]]=t[r[0]]},notifications:function(e,t){e.user.notifications=t},following:function(e,t){var r=e.user.following.findIndex((function(e){return e===t._id}));r<0?e.user.following.push(t._id):e.user.following.splice(r,1)},toggleModal:function(e,t){e.isLoginModal=t},currentEditArticle:function(e,t){e.currentEditArticle=t},myArticleTabIndex:function(e,t){e.myArticleTabIndex=t}},actions:{},modules:{},plugins:[Object(Y["a"])()]}),J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("Carousel",{attrs:{carouselArticles:e.carouselArticles}}),r("div",{staticClass:"official-articles"},[r("b-container",[r("b-row",{staticClass:"official-articles__row"},[r("b-col",{staticClass:"mb-4 official-articles__header",attrs:{cols:"12"}},[r("b-avatar",{staticClass:"official-articles__avatar mr-3",attrs:{button:"",src:e.officialPhotoUrl,size:"2.4rem"},on:{click:e.toOfficialBlog}}),r("span",{staticClass:"official-articles__name",on:{click:e.toOfficialBlog}},[e._v(e._s(e.officialName))])],1),e._l(e.officialArticles,(function(e){return r("b-col",{key:e._id,staticClass:"article-item",attrs:{cols:"12",md:"4"}},[r("VerticalArticleCard",{attrs:{article:e}})],1)})),r("b-col",{attrs:{cols:"12"}},[r("p",{staticClass:"official-articles__text",on:{click:e.toOfficialBlog}},[e._v("閱讀更多我們的文章")])])],2)],1)],1),r("div",{staticClass:"author-articles"},[r("b-container",[r("b-row",{staticClass:"author-articles__row"},[r("b-col",{attrs:{cols:"12",lg:"8","order-lg":"0",order:"1"}},e._l(e.authorArticles,(function(e){return r("div",{key:e._id,staticClass:"article-item"},[r("HorizontalArticleCard",{attrs:{article:e}})],1)})),0),r("b-col",{staticClass:"ml-auto",attrs:{cols:"12",lg:"3","order-lg":"1",order:"0"}},[r("div",{staticClass:"popular-tags"},[e._l(e.getPopularTags,(function(e){return r("ArticleTag",{attrs:{tag:e.name}})})),r("p",{staticClass:"d-none d-lg-block popular-tags__text"},[e._v("文章熱門標籤，點擊標籤查詢相關文章。")])],2)])],1)],1)],1)],1)},W=[],Q=(r("4de4"),r("4160"),r("fb6a"),r("159b"),r("b85c")),X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-carousel",{staticClass:"carousel",attrs:{id:"carousel",controls:"",indicators:"",background:"#939597"},model:{value:e.slide,callback:function(t){e.slide=t},expression:"slide"}},e._l(e.carouselArticles,(function(t){return r("b-carousel-slide",{key:t._id,staticClass:"carousel__item",scopedSlots:e._u([{key:"img",fn:function(){return[r("img",{staticClass:"carousel__img",attrs:{src:t.coverPhotoUrl}})]},proxy:!0}],null,!0)},[r("h1",{staticClass:"carousel__title",on:{click:function(r){return e.toArticle(t._id)}}},[e._v(e._s(t.title))]),r("p",{staticClass:"carousel__text"},[e._v(e._s(t.subTitle))])])})),1)},Z=[],ee={name:"Carousel",props:{carouselArticles:Array},data:function(){return{slide:0}},methods:{toArticle:function(e){this.$router.push("/article/"+e)}}},te=ee,re=Object(g["a"])(te,X,Z,!1,null,null,null),ae=re.exports,ie=r("c44e"),se=r("a4b6"),ne=r("92a6"),oe={name:"Home",components:{Carousel:ae,HorizontalArticleCard:ie["a"],VerticalArticleCard:se["a"],ArticleTag:ne["a"]},data:function(){return{articles:[]}},computed:{user:function(){return this.$store.state.user},carouselArticles:function(){return this.articles.concat().sort((function(e,t){var r=e.likes.length,a=t.likes.length;return a-r})).slice(0,5)},officialArticles:function(){return this.articles.filter((function(e){return"Cuishare"===e.author.username})).slice(0,6)},authorArticles:function(){return this.articles.filter((function(e){return"Cuishare"!==e.author.username}))},officialPhotoUrl:function(){return this.officialArticles.length>0?this.officialArticles[0].author.photoUrl:""},officialName:function(){return this.officialArticles.length>0?this.officialArticles[0].author.username:""},officialId:function(){return this.officialArticles.length>0?this.officialArticles[0].author._id:""},getPopularTags:function(){var e=[];return this.articles.forEach((function(t){var r,a=Object(Q["a"])(t.tags);try{var i=function(){var t=r.value,a=e.findIndex((function(e){return e.name===t}));a>-1?e[a].count++:e.push({name:t,count:1})};for(a.s();!(r=a.n()).done;)i()}catch(s){a.e(s)}finally{a.f()}})),e.sort((function(e,t){return t.count-e.count})),e.slice(0,10)}},methods:{filterPublished:function(e){return e.filter((function(e){var t=e.isPublished,r=e.isDraft,a=e.isBlocked,i=e.isUnlisted,s=e.author;return t&&!r&&!a&&!i&&!s.isBlocked})).map((function(e){return e.publishedDate=Object(h["a"])(e.publishedDate),e.title=e.title?e.title:"Untitled",e}))},toOfficialBlog:function(){this.$router.push("/blog/"+this.officialId)}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$loading.show(),t.prev=1,t.next=4,e.axios.get("https://cuishare.herokuapp.com/articles");case 4:a=t.sent,i=a.data,s=i.success,n=i.result,s&&(e.articles=e.filterPublished(n)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:r.hide();case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()}},ce=oe,le=Object(g["a"])(ce,J,W,!1,null,null,null),ue=le.exports;a["default"].use(F["a"]);var de=[{path:"/",name:"Home",component:ue,meta:{isLogin:!1}},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))},meta:{isLogin:!1}},{path:"/article/:id",name:"ArticleRead",component:function(){return Promise.all([r.e("article~article-edit"),r.e("article")]).then(r.bind(null,"71db"))},meta:{isLogin:!1}},{path:"/article-edit/:id",name:"ArticleEdit",component:function(){return Promise.all([r.e("article~article-edit"),r.e("article-edit")]).then(r.bind(null,"04d0"))},meta:{isLogin:!0}},{path:"/article-search/:value",name:"ArticleSearch",component:function(){return r.e("article-search").then(r.bind(null,"f7cd"))},meta:{isLogin:!1}},{path:"/blog/:id",name:"Blog",component:function(){return r.e("blog").then(r.bind(null,"fd3f"))},meta:{isLogin:!1}},{path:"/user-settings",name:"UserSettings",component:function(){return r.e("user-settings").then(r.bind(null,"3a73"))},meta:{isLogin:!0}},{path:"/my-article",name:"MyArticle",component:function(){return r.e("my-article").then(r.bind(null,"a741"))},meta:{isLogin:!0}},{path:"/my-favorites",name:"MyFavorites",component:function(){return r.e("my-favorites").then(r.bind(null,"fd4f"))},meta:{isLogin:!0}},{path:"/my-follow",name:"MyFollow",component:function(){return r.e("my-follow").then(r.bind(null,"0c66"))},meta:{isLogin:!0}},{path:"/admin",name:"Admin",component:function(){return r.e("admin").then(r.bind(null,"3530"))},children:[{path:"member-management",name:"MemberManagement",component:function(){return r.e("member-management").then(r.bind(null,"954f"))},meta:{isLogin:!0,isAdmin:!0}},{path:"article-management",name:"ArticleManagement",component:function(){return r.e("article-management").then(r.bind(null,"1531"))},meta:{isLogin:!0,isAdmin:!0}}],meta:{isLogin:!0,isAdmin:!0}}],me=new F["a"]({routes:de});me.beforeEach((function(e,t,r){(!e.meta.isLogin||G.state.user.id&&!G.state.user.isBlocked)&&(!e.meta.isAdmin||G.state.user.isAdmin&&G.state.user.id)?r():r("/")})),me.afterEach((function(e,t){document.title="Cuishare"}));var fe=me,he=r("bc3a"),pe=r.n(he),be=r("2106"),ge=r.n(be),ve=r("657c"),_e=r("6930"),we=r.n(_e),ke=r("9062"),Ce=r.n(ke),ye=r("a65d"),xe=r.n(ye),Ae=(r("e40d"),r("5530")),Oe=r("4c93");Object(j["c"])("required",Object(Ae["a"])(Object(Ae["a"])({},Oe["f"]),{},{message:function(e){return"password"===e&&(e="密碼"),"new-password"===e&&(e="新密碼"),"username"===e&&(e="用戶名稱"),"confirmPassword"===e?"再輸入一次密碼":"必須填寫".concat(e)}})),Object(j["c"])("email",Object(Ae["a"])(Object(Ae["a"])({},Oe["c"]),{},{message:"請輸入正確的{_field_}"})),Object(j["c"])("min",Object(Ae["a"])(Object(Ae["a"])({},Oe["e"]),{},{message:function(e,t){return"password"===e&&(e="密碼"),"new-password"===e&&(e="新密碼"),"username"===e&&(e="用戶名稱"),"".concat(e,"不得少於").concat(t.length,"個字")}})),Object(j["c"])("max",Object(Ae["a"])(Object(Ae["a"])({},Oe["d"]),{},{message:function(e,t){return"password"===e&&(e="密碼"),"new-password"===e&&(e="新密碼"),"username"===e&&(e="用戶名稱"),"about"===e&&(e="關於介紹"),"".concat(e,"不得超過").concat(t.length,"個字")}})),Object(j["c"])("confirmed",Object(Ae["a"])(Object(Ae["a"])({},Oe["b"]),{},{message:"與密碼不符"})),Object(j["c"])("alphaNum",Object(Ae["a"])(Object(Ae["a"])({},Oe["a"]),{},{message:"密碼僅包含英文字或數字"})),Object(j["c"])("emailUnique",{validate:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.a.get("https://cuishare.herokuapp.com/users/"+t);case 3:return r=e.sent,e.abrupt("return",r.data.success);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response.data.success);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}(),message:"email 已被使用過"}),Object(j["c"])("bannedName",{validate:function(e){return!/Cuishare/i.test(e)},message:"此名稱不能使用"});var $e=r("ecee"),Le=r("ad3d"),Se=r("b702"),je=r("c074");$e["c"].add(Se["g"],je["d"],Se["b"],je["a"],Se["c"],Se["h"],Se["d"],je["e"],Se["e"],Se["f"],je["c"],je["b"],je["f"],Se["a"]),a["default"].component("font-awesome-icon",Le["a"]),pe.a.defaults.withCredentials=!0,a["default"].config.productionTip=!1,a["default"].component("ImgInputer",ve["a"]),a["default"].use(ge.a,pe.a),a["default"].use(we.a),a["default"].use(Ce.a,{color:"#FFB015",backgroundColor:"#fff",opacity:1,lockScroll:!0}),a["default"].use(xe.a,{position:"top-center",duration:2e3,keepOnHover:!0,fitToScreen:!0,singleton:!0}),new a["default"]({router:fe,store:G,render:function(e){return e(q)}}).$mount("#app")},6608:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return s}));var a=r("5082"),i=function(e){var t=new Date(e),r=t.getFullYear();r<1900&&(r+=1900);var a=t.getMonth()+1;a<10&&(a="0"+a);var i=t.getDate();return i<10&&(i="0"+i),r+"/"+a+"/"+i},s=function(e){var t=a["getTimeDiff"],r=new Date(e),s=new Date,n=t(r,s),o=n.value,c=n.suffix;switch(c){case"second":case"seconds":n.text=o+" 秒前";break;case"minute":case"minutes":n.text=o+" 分鐘前";break;case"hour":case"hours":n.text=o+" 小時前";break;case"days":n.text=o+" 天前";break;case"weeks":n.text=o+" 星期前";break;case"months":n.text=o+" 月前";break;case"year":n.text=o+" 年前";break;case"years":n.text=i(e);break}return n.text}},"92a6":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"article-tag tag",on:{click:e.onSearch}},[e._v(e._s(e.tag))])},i=[],s={name:"ArticleTag",props:{tag:String},methods:{onSearch:function(){this.$router.push("/article-search/"+this.tag)}}},n=s,o=r("2877"),c=Object(o["a"])(n,a,i,!1,null,null,null);t["a"]=c.exports},a4b6:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"article-card article-card--vertical overflow-hidden",attrs:{"no-body":""}},[e.article.coverPhotoUrl?r("div",{staticClass:"article-card__cover-photo",on:{click:function(t){return e.toArticle(e.article._id)}}},[r("b-card-img",{staticClass:"article-card__img",attrs:{src:e.article.coverPhotoUrl,alt:e.article.title}})],1):e._e(),r("b-card-header",{staticClass:"article-card__header"},[r("b-avatar",{staticClass:"article-card__avatar",attrs:{src:e.article.author.photoUrl,size:"1.6rem",rounded:"sm"}}),r("span",{staticClass:"article-card__author-name"},[e._v(e._s(e.article.author.username))])],1),r("b-card-body",{staticClass:"article-card__content"},[r("h2",{staticClass:"article-card__title",on:{click:function(t){return e.toArticle(e.article._id)}}},[e._v(e._s(e.article.title))]),r("p",{staticClass:"article-card__sub-title"},[e._v(e._s(e.article.subTitle))]),r("div",{staticClass:"article-card__tags"},e._l(e.article.tags,(function(e){return r("ArticleTag",{attrs:{tag:e}})})),1)]),r("b-card-footer",{staticClass:"article-card__footer"},[r("span",{staticClass:"article-card__create-at"},[e._v(e._s("發布於 "+e.article.publishedDate+"，"+e.article.readingTime))]),r("ArticleInteractive",{attrs:{article:e.article,size:"lg"}})],1)],1)},i=[],s=r("c7f8"),n=r("92a6"),o={name:"VerticalArticleCard",components:{ArticleInteractive:s["a"],ArticleTag:n["a"]},props:{article:Object},methods:{toArticle:function(e){this.$router.push("/article/"+e)},toAuthorBlog:function(e){this.$router.push("/blog/"+e)}}},c=o,l=r("2877"),u=Object(l["a"])(c,a,i,!1,null,null,null);t["a"]=u.exports},c1c3:function(e,t,r){},c44e:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"article-card article-card--horizontal overflow-hidden",attrs:{"no-body":""}},[r("b-row",{attrs:{"no-gutters":""}},[r("b-col",{staticClass:"article-card__col",attrs:{cols:"8"}},[r("b-card-header",{staticClass:"article-card__header"},[r("b-avatar",{staticClass:"article-card__avatar",attrs:{src:e.article.author.photoUrl,size:"1.6rem",rounded:"sm",to:"/blog/"+e.article.author._id}}),r("span",{staticClass:"article-card__author-name",on:{click:function(t){return e.toAuthorBlog(e.article.author._id)}}},[e._v(e._s(e.article.author.username))])],1),r("b-card-body",{staticClass:"article-card__content"},[r("h2",{staticClass:"article-card__title",on:{click:function(t){return e.toArticle(e.article._id)}}},[e._v(e._s(e.article.title))]),r("p",{staticClass:"article-card__sub-title"},[e._v(e._s(e.article.subTitle))]),r("div",{staticClass:"article-card__tags"},e._l(e.article.tags,(function(e){return r("ArticleTag",{attrs:{tag:e}})})),1)]),r("b-card-footer",{staticClass:"article-card__footer"},[r("span",{staticClass:"article-card__create-at"},[e._v(e._s("發布於 "+e.article.publishedDate+"，"+e.article.readingTime))]),r("ArticleInteractive",{attrs:{article:e.article,size:"lg"}})],1)],1),r("b-col",{staticClass:"article-card__col",attrs:{cols:"4"}},[e.article.coverPhotoUrl?r("div",{staticClass:"article-card__cover-photo",on:{click:function(t){return e.toArticle(e.article._id)}}},[r("b-card-img",{staticClass:"article-card__img",attrs:{src:e.article.coverPhotoUrl,alt:e.article.title}})],1):e._e()])],1)],1)},i=[],s=r("c7f8"),n=r("92a6"),o={name:"HorizontalArticleCard",components:{ArticleInteractive:s["a"],ArticleTag:n["a"]},props:{article:Object},methods:{toArticle:function(e){this.$router.push("/article/"+e)},toAuthorBlog:function(e){this.$router.push("/blog/"+e)}}},c=o,l=r("2877"),u=Object(l["a"])(c,a,i,!1,null,null,null);t["a"]=u.exports},c7f8:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"article-interactive"},[e.isShowComment?r("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.comment-sidebar",modifiers:{"comment-sidebar":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottomleft",modifiers:{hover:!0,bottomleft:!0}}],staticClass:"article-interactive__icon article-interactive__icon--comment",attrs:{title:"留言"}},[r("font-awesome-icon",{attrs:{icon:["far","comment-dots"],size:e.size,"fixed-width":""}})],1):e._e(),r("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottomleft",modifiers:{hover:!0,bottomleft:!0}}],staticClass:"article-interactive__icon article-interactive__icon--like",attrs:{title:e.likeCount}},[r("font-awesome-icon",{class:e.likeIconClass,attrs:{icon:e.likeIcon,size:e.size,"fixed-width":""},on:{click:function(t){return e.clikcLike(e.article)}}})],1),r("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottomleft",modifiers:{hover:!0,bottomleft:!0}}],staticClass:"article-interactive__icon article-interactive__icon--favorite",attrs:{title:e.favoritesCount}},[r("font-awesome-icon",{class:e.favoritesIconClass,attrs:{icon:e.favoritesIcon,size:e.size,"fixed-width":""},on:{click:function(t){return e.clikcFavorites(e.article)}}})],1)])},i=[],s=(r("caad"),r("2532"),r("96cf"),r("1da1")),n={name:"ArticleInteractive",props:{article:Object,size:String,isShowComment:{type:Boolean,default:!1}},computed:{user:function(){return this.$store.state.user},isLiked:function(){return this.article.likes.includes(this.user.id)},isfavorited:function(){return this.article.favorites.includes(this.user.id)},likeIcon:function(){return this.user.id&&this.isLiked?["fas","heart"]:["far","heart"]},favoritesIcon:function(){return this.user.id&&this.isfavorited?["fas","bookmark"]:["far","bookmark"]},likeIconClass:function(){return{"checked-like-icon":this.isLiked}},favoritesIconClass:function(){return{"checked-favorites-icon":this.isfavorited}},likeCount:function(){var e=this.article.likes.length,t=e?"".concat(e," 人喜歡"):"喜歡文章嗎?";return t},favoritesCount:function(){var e=this.article.favorites.length,t=e?"".concat(e," 人收藏"):"收藏文章";return t}},methods:{clikcLike:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,i,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.user.id){r.next=2;break}return r.abrupt("return",t.$bvModal.show("user-modal"));case 2:if(!t.user.isBlocked){r.next=4;break}return r.abrupt("return",t.$toasted.error("你的帳號被封鎖，不能操作"));case 4:return r.prev=4,r.next=7,t.axios.patch("https://cuishare.herokuapp.com/articles/likes/"+e._id);case 7:a=r.sent,i=a.data,s=i.success,n=i.result,s&&(e.likes=n.likes),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](4),alert(r.t0.response.data.message);case 15:case"end":return r.stop()}}),r,null,[[4,12]])})))()},clikcFavorites:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,i,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.user.id){r.next=2;break}return r.abrupt("return",t.$bvModal.show("user-modal"));case 2:if(!t.user.isBlocked){r.next=4;break}return r.abrupt("return",t.$toasted.error("你的帳號被封鎖，不能操作"));case 4:return r.prev=4,r.next=7,t.axios.patch("https://cuishare.herokuapp.com/articles/favorites/"+e._id);case 7:a=r.sent,i=a.data,s=i.success,n=i.result,s&&(e.favorites=n.favorites),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](4),alert(r.t0.response.data.message);case 15:case"end":return r.stop()}}),r,null,[[4,12]])})))()}}},o=n,c=r("2877"),l=Object(c["a"])(o,a,i,!1,null,null,null);t["a"]=l.exports},f8ff:function(e,t,r){},fdd9:function(e,t,r){e.exports=r.p+"img/logo.d1efb1ee.png"}});
//# sourceMappingURL=app.8695b87c.js.map