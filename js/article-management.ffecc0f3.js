(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["article-management"],{1531:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article-management"},[r("h3",{staticClass:"d-inline-block mb-4 mr-3"},[t._v("文章管理")]),r("span",{staticClass:"tag no-hover"},[t._v(t._s("文章總數："+t.articles.length))]),r("b-form",{staticClass:"mb-4"},[r("b-form-input",{attrs:{type:"text",placeholder:"搜尋文章或輸入文章狀態來查詢 ..."},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),r("div",{staticClass:"article-management__main"},[r("b-table",{attrs:{fields:t.fields,items:t.filterArticles,responsive:"md",striped:"",hover:""},scopedSlots:t._u([{key:"cell(title)",fn:function(e){return[r("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],attrs:{to:"/article/"+e.item._id,title:e.item.title}},[t._v(t._s(e.item.title))])]}},{key:"cell(author)",fn:function(e){return[r("b-avatar",{attrs:{src:e.item.author.photoUrl,to:"/blog/"+e.item.author._id,size:"2rem"}}),r("span",{staticClass:"ml-2"},[t._v(t._s(e.item.author.username))])]}},{key:"cell(likes)",fn:function(e){return[r("span",[t._v(t._s(e.item.likes))])]}},{key:"cell(favorites)",fn:function(e){return[r("span",[t._v(t._s(e.item.favorites))])]}},{key:"cell(isBlocked)",fn:function(e){return[r("b-button",{staticClass:"custom-btn custom-btn--blockade",class:e.item.isBlocked?"btn--blocked":"",attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(r){return t.blockade(e)}}},[t._v(t._s(t.articleStatus(e)))])]}}])})],1)],1)},s=[],a=(r("4de4"),r("c975"),r("d81d"),r("2ca0"),r("96cf"),r("1da1")),n={name:"ArticleManagement",data:function(){return{searchValue:"",fields:[{key:"title",label:"文章",sortable:!0},{key:"author",label:"作者",sortable:!0},{key:"likes",label:"喜歡",sortable:!0},{key:"favorites",label:"收藏",sortable:!0},{key:"isBlocked",label:"文章狀態"}],articles:[]}},computed:{filterArticles:function(){var t=this;return this.searchValue.startsWith("已發佈")?this.articles.filter((function(t){return t.isPublished&&!t.isUnlisted})):this.searchValue.startsWith("未公開")?this.articles.filter((function(t){return t.isUnlisted})):this.searchValue.startsWith("封鎖")?this.articles.filter((function(t){return t.isBlocked})):this.articles.filter((function(e){return e.title.indexOf(t.searchValue)>=0}))}},methods:{blockade:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var i,s,a,n,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,i={isBlocked:!t.item.isBlocked},r.next=4,e.axios.patch("https://cuishare.herokuapp.com/articles/blockade/"+t.item._id,i);case 4:s=r.sent,a=s.data,n=a.success,l=a.result,n&&(t.item.isBlocked=l.isBlocked),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},articleStatus:function(t){var e=t.item,r=e.isPublished,i=e.isUnlisted,s=e.isBlocked;return s?"封鎖中":r?i?"未公開":"已發佈":"未發佈"}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r,i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("https://cuishare.herokuapp.com/articles");case 3:r=e.sent,i=r.data,s=i.success,a=i.result,s&&(t.articles=a.map((function(t){return t.likes=t.likes.length,t.favorites=t.favorites.length,t}))),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},l=n,c=r("2877"),o=Object(c["a"])(l,i,s,!1,null,null,null);e["default"]=o.exports},"2ca0":function(t,e,r){"use strict";var i=r("23e7"),s=r("06cf").f,a=r("50c4"),n=r("5a34"),l=r("1d80"),c=r("ab13"),o=r("c430"),u="".startsWith,f=Math.min,h=c("startsWith"),d=!o&&!h&&!!function(){var t=s(String.prototype,"startsWith");return t&&!t.writable}();i({target:"String",proto:!0,forced:!d&&!h},{startsWith:function(t){var e=String(l(this));n(t);var r=a(f(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return u?u.call(e,i,r):e.slice(r,r+i.length)===i}})},c975:function(t,e,r){"use strict";var i=r("23e7"),s=r("4d64").indexOf,a=r("a640"),n=r("ae40"),l=[].indexOf,c=!!l&&1/[1].indexOf(1,-0)<0,o=a("indexOf"),u=n("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:c||!o||!u},{indexOf:function(t){return c?l.apply(this,arguments)||0:s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=article-management.ffecc0f3.js.map